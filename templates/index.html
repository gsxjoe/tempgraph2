<!DOCTYPE html>
<html>
<head>
    <title>Pepper's Temperature Monitor</title>
    <meta http-equiv="refresh" content="5">
    <style>
        body { font-family: sans-serif; text-align: center; }
    </style>
</head>
<body>
    <h1>Raspberry Pi Temperature</h1>
    <div id="sensor_data">
        <p>Sensor 1: <span id="temp1">...</span></p>
        <p>Sensor 2: <span id="temp2">...</span></p>
    </div>
    <script>
        function fetchTemp() {
            fetch('/data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temp1').innerText = data.sensor1;
                    document.getElementById('temp2').innerText = data.sensor2;
                })
                .catch(error => console.error('Error fetching data:', error));
        }
        setInterval(fetchTemp, 10000);
        fetchTemp(); // Initial fetch
    </script>

    #added code_______________________________________________________________________________
     <h2>Live MAX6675 Temperature</h2>
    <img id="tempGraph" src="/plot.png" alt="Temperature Graph">
    <p>Last updated: <span id="lastUpdated">N/A</span></p>

    <script>
        function refreshGraph() {
            var graph = document.getElementById('tempGraph');
            var now = new Date();
            var lastUpdated = document.getElementById('lastUpdated');

            // Add a timestamp to the image URL to prevent browser caching
            graph.src = "/plot.png?t=" + now.getTime();
            lastUpdated.innerText = now.toLocaleTimeString();
        }

        // Refresh the graph every 5 seconds
        setInterval(refreshGraph, 5000);
    </script>
#end added______________________________________________________________________________________________
</body>
</html>
