<!DOCTYPE html>
<html>
<head>
    <title>Pepper's Temperature Monitor</title>
    <meta http-equiv="refresh" content="5">
    <style>
        body { font-family: sans-serif; text-align: center; }
    .auto-style1 {
		font-size: xx-large;
	}
    </style>
</head>
<body style="color: #FF3300; background-color: #000000">
    <h1>Pepper's BBQ Meter</h1>
    <div id="sensor_data">
        <p><span class="auto-style1">Grill&nbsp;&nbsp;&nbsp; : </span> 
		<span id="temp1" class="auto-style1">...</span></p>
        <p><span class="auto-style1">Meat&nbsp;&nbsp;&nbsp; : </span> 
		<span id="temp2" class="auto-style1">...</span></p>
    </div>
    <script>
        function fetchTemp() {
            fetch('/data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temp1').innerText = data.sensor1;
                    document.getElementById('temp2').innerText = data.sensor2;
                })
                .catch(error => console.error('Error fetching data:', error));
        }
        setInterval(fetchTemp, 10000);
        fetchTemp(); // Initial fetch
    </script>

<title>Interactive CSV Graph</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>Interactive Data from CSV</h2>
    <div id="graph-container"></div>
    <script>
        // Use Fetch API to get the CSV file
        fetch('/sensor_readings.csv')
            .then(response => response.text())
            .then(text => {
                const lines = text.split('\n').slice(1); // Split lines and skip header
                const timestamps = lines.map(line => line.split(',')[0]);
                const temperatures = lines.map(line => parseFloat(line.split(',')[1]));

                const trace = {
                    x: timestamps,
                    y: temperatures,
                    mode: 'lines+markers',
                    type: 'scatter'
                };
                const layout = {
                    title: 'Interactive Temperature Graph',
                    xaxis: {title: 'Timestamp'},
                    yaxis: {title: 'Temperature (Â°C)'}
                };

                Plotly.newPlot('graph-container', [trace], layout);
            });
    </script>
</body>
</html>
